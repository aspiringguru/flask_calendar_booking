<!doctype html>
<html>
   <body>
      <table border = 1>
         <thead>
            <td>Name</td>
            <td>Start Time</td>
            <td>End Time</td>
            <td>Booking slots</td>
         </thead>

         {% for row in rows %}
            <tr>
               <td>{{row[1]}}</td>
               <td>{{row[2]}}</td>
               <td>{{row[3]}}</td>
               <td id='{{row[0]}}'></td>
               <script>
                    console.log('{{ row }}')
                    console.log('{{ row[1] }}' + " : " + '{{ row[2] }}'+ " : " + '{{ row[3] }}')
                    starttime = '{{ row[2] }}'
                    console.log("starttime:", starttime)
                    var startyear = starttime.substring(0, 4)
                    var startmonth = starttime.substring(5, 7)
                    var startday = starttime.substring(8, 10)
                    var starthour = starttime.substring(11, 13)
                    var startmin = starttime.substring(14, 16)
                    var startsec = starttime.substring(17, 19)
                    console.log("year:month:day = "+startyear+":"+startmonth+":"+startday)
                    console.log("hour:min:sec = "+starthour+":"+startmin+":"+startsec)
                    endtime = '{{ row[3] }}'
                    console.log("endtime:", endtime)
                    var endyear = endtime.substring(0, 4)
                    var endmonth = endtime.substring(5, 7)
                    var endday = endtime.substring(8, 10)
                    var endhour = endtime.substring(11, 13)
                    var endmin = endtime.substring(14, 16)
                    var endsec = endtime.substring(17, 19)
                    console.log("year:month:day = "+endyear+":"+endmonth+":"+endday)
                    console.log("hour:min:sec = "+endhour+":"+endmin+":"+endsec)
                    var end_time = parseInt({{end_time}}, 10)
                    var start_time = parseInt({{start_time}}, 10)
                    console.log("typeof end_time:", typeof end_time)
                    console.log("typeof start_time:", typeof start_time)
                    console.log("end_time:'"+{{end_time}}+"' "+end_time)
                    console.log("start_time:'"+{{start_time}}+"' "+start_time)
                    for (hour = start_time; hour < end_time; hour++) {
                        if (hour>=starthour && hour<endhour){
                            temp = "<a href='/booking?year="+startyear+"&month="+startmonth+"&day="+startday+"&hour="+hour+"&id="+{{row[0]}}+"'>"+hour+"</a>"
                        } else {
                            temp = hour
                        }
                        document.getElementById("{{row[0]}}").innerHTML += " "+temp+" "
                    }

               </script>
            </tr>
         {% endfor %}
      </table>

      <a href = "/">Go back to home page</a>

   </body>
</html>
